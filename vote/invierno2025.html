<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Word Cup</title>
    <link rel="stylesheet" href="../css&jh/main.css">
</head>
<body>
    <header>
        <h1>Invierno 2025</h1>
        <p>¡Elige tu video favorito en cada ronda hasta que tengamos un ganador!<br><br>Hecho por marcosplpp</p>
    </header>

    <div class="container" id="app">
        <div class="round-banner">
            <span id="current-round">Ronda 1</span>
            <div class="progress-container">
                <label for="pairs-progress">Progreso Turnos:</label>
                <progress id="pairs-progress" max="100" value="0"></progress>
                <span id="pairs-text">Turnos: 1 / 3</span>
            </div>
            <div class="progress-container">
                <label for="rounds-progress">Progreso Rondas:</label>
                <progress id="rounds-progress" max="100" value="0"></progress>
                <span id="rounds-text">Rondas totales: 1 / 3</span>
            </div>
            <span id="videos-remaining">Videos restantes: 6</span>
        </div>
        <div id="round-info" class="round-info"></div>
        <div id="round" class="video-container"></div>
        <div id="winner" class="winner"></div>
        <div id="status" class="status"></div>
    </div>

    <script>
        const videos = [
            "https://www.youtube.com/embed/jeZFZhQ2P8U?si=HpEST2DP_Pxwufmx",
            "https://www.youtube.com/embed/y5dpB20vJ34?si=MYXy4notE6rcHMZX",
            "https://www.youtube.com/embed/x4xVN05q43E?si=44nTXptTd54SQIUm",
            "https://www.youtube.com/embed/2jj9KwcZRVM?si=6tPzxJbnDh9tmP4R",
            "https://www.youtube.com/embed/oygsxvHtU74?si=0zJTcI_Z6l99Q0JB",
            "https://www.youtube.com/embed/d7b7oVxFm-0?si=IYZPBrAbPMfg7j0-",
            "https://www.youtube.com/embed/qo470zpnrak?si=b7adanejf1S5ONx0",
            "https://www.youtube.com/embed/ZktP1rb1xZc?si=CVH-Jc3kDPFvzLC2",
            "https://www.youtube.com/embed/lXVlZvB6FEg?si=vTdnOssh2vCBGpBN",
            "https://www.youtube.com/embed/pSdXFEuwMtc?si=G7ru_lphfMzwysHK",
            "https://www.youtube.com/embed/FPLc7a2SN6A?si=gdvcYk7EM6gXpv6L",
            "https://www.youtube.com/embed/-xbPB-XtwGU?si=HMzOVIKtYIEve5eB",
            "https://www.youtube.com/embed/M4VKa01PPnY?si=NC-l8IhGGsZ46I8m",
            "https://www.youtube.com/embed/LgV4SmtPEaQ?si=hFccDL-UTpsGwHAW",
            "https://www.youtube.com/embed/i8p6Zfp48RU?si=qQE4UTJYT0bCW_CN",
            "https://www.youtube.com/embed/IPq9ROWnsuA?si=pArB0bJzdqp7EH_X",
            "https://www.youtube.com/embed/Fc_JMby6dAs?si=e3SLTS8IN6Z7cSAS",
            "https://www.youtube.com/embed/BT0eNKgINGU?si=4KGBCSrheIWPzmT6",
            "https://www.youtube.com/embed/3EDhBl4AUQg?si=dAxyjQSgAndHJxmV",
            "https://www.youtube.com/embed/s7W_8drfG7o?si=lqhndBCbx_LEw1VQ",
            "https://www.youtube.com/embed/DmNAuizS7uY?si=oX3qlsUx-QPn3btI",
            "https://www.youtube.com/embed/P8g-LUsKYOE?si=WBZUrsWJUrWgcW8Y",
            "https://www.youtube.com/embed/fG07I9UlnoI?si=ACT32bLrbkUsUmWG",
            "https://www.youtube.com/embed/wmKDa_-uVhM?si=IDHdjo7w5mIGKTEo",
            "https://www.youtube.com/embed/u9RuD4zUzJY?si=D3iQMJFe97V0sZcN",
            "https://www.youtube.com/embed/ZEsyXCanlIA?si=-8px4eGgrHZlaEr6",
            "https://www.youtube.com/embed/ePpfnvzbye4?si=iO0VQRhU5eVy04zx",
            "https://www.youtube.com/embed/nX4BWfmpMpY?si=R9WfYs9d45GuGu47",
            "https://www.youtube.com/embed/wOleNo7T6_4?si=9XpdUTWBl9nSAJNT",
            "https://www.youtube.com/embed/fek1ktzFgDY?si=MO0OlO984aKrPPjU",
            "https://www.youtube.com/embed/X_de84u9gbE?si=xUDVsxAGBUDYLf9Q",
            "https://www.youtube.com/embed/L9u-Edb3QjA?si=SxNRKvdjYt5iU6YL",
            "https://www.youtube.com/embed/ktn3GitKEaQ?si=Manuy4E0hcjE1HZm",
            "https://www.youtube.com/embed/VvwpkhTxPcU?si=0XN41ZZ0ErrMdQSY",
            "https://www.youtube.com/embed/cNWLrTJnLVc?si=0gZGFzji01CRbHc7",
            "https://www.youtube.com/embed/2srNiLGo8Q0?si=Ji5oHYlR-DpJNzKs",
            "https://www.youtube.com/embed/XhCZhzRgBCs?si=jUDVtvugqCcWLwZg",
            "https://www.youtube.com/embed/txnDjEJ3SEE?si=kIC81yBqSnIx_pIN",
            "https://www.youtube.com/embed/FWXkipC-vqs?si=VeoL6QSLvkbAk2Fn",
            "https://www.youtube.com/embed/1yKA0LwGy1g?si=Ah8huldx05h1TnI8",
            "https://www.youtube.com/embed/AbRyFs5Eg0s?si=sxicepFmwC8w-md_",
            "https://www.youtube.com/embed/aTdDYP7-KXA?si=nW4rD2Gn4VUaMxPd",
            "https://www.youtube.com/embed/sP-ac1RIR8U?si=cwdJ6M2Oko2Z0i_q",
            "https://www.youtube.com/embed/qCOCq2Gay84?si=U7nooaayzMy5a16N",
            "https://www.youtube.com/embed/jj7DnKGG148?si=6Zb6ISJx5BuWfHxs",
            "https://www.youtube.com/embed/XQ8IZMaUOnU?si=oU86nEAtE2NO1BJx",
            "https://www.youtube.com/embed/dnPmbhvzy6U?si=mAGOxHEeliBvJGfr",
            "https://www.youtube.com/embed/g5yCkyCZ6ZA?si=M8IEMJPa-gsrvwws",
            "https://www.youtube.com/embed/iUaZd98Dp3M?si=chMzvgQYHv89lDH7",
            "https://www.youtube.com/embed/agYpVLKBDSE?si=kA2Tx09X_A4JzdX_",
            "https://www.youtube.com/embed/vuhGe1FEot4?si=ET-_hsz4JSSJqbgz",
            "https://www.youtube.com/embed/sgnYEfM7U2U?si=cMAllGJS62FEwFJZ",
            "https://www.youtube.com/embed/zkOYWw0u8as?si=zX_x0fvJlOfMueiL",
            "https://www.youtube.com/embed/pAjs2GWEZvI?si=VQbocs5BxzDaqR-b",
            "https://www.youtube.com/embed/VEb3rctB3dc?si=DH07kPJG0lr3bHlQ",
            "https://www.youtube.com/embed/4VCsU3shAv4?si=REGcU0t6wrJFdjaH",
            "https://www.youtube.com/embed/TxqbWB0BJkk?si=jphKQFiTi-PLX-hc",
            "https://www.youtube.com/embed/ti21tnWfYTM?si=HYgAGUkW3O1Xc75A",
            "https://www.youtube.com/embed/oVfo_p4xYwk?si=40lzbzEhUocWSJBZ",
            "https://www.youtube.com/embed/uvjgeYYzCMc?si=OgA-C1pVtlnGMmF_",
            "https://www.youtube.com/embed/C9u0M5d1X2U?si=qtJIkpuXCug2L8rD",
            "https://www.youtube.com/embed/HXTeszlOS5A?si=X_aYgjbhzAAygFB3"
        ];

        const app = document.getElementById('app');
        const roundContainer = document.getElementById('round');
        const winnerContainer = document.getElementById('winner');
        const statusContainer = document.getElementById('status');
        const currentRoundElement = document.getElementById('current-round');
        const videosRemainingElement = document.getElementById('videos-remaining');
        const pairsProgressElement = document.getElementById('pairs-progress');
        const roundsProgressElement = document.getElementById('rounds-progress');
        const pairsTextElement = document.getElementById('pairs-text');
        const roundsTextElement = document.getElementById('rounds-text');

        let roundNumber = 1;
        let totalRounds = Math.ceil(Math.log2(videos.length));
        let pairsInCurrentRound = 1;
        let totalPairsInRound = Math.floor(videos.length / 2);
        const eliminatedVideos = [];
        const initialVideosCount = videos.length;

        function updateBanner() {
            currentRoundElement.textContent = `Ronda ${roundNumber}`;
            videosRemainingElement.textContent = `Videos restantes: ${videos.length}`;

            const pairsProgress = totalPairsInRound > 0 ? (pairsInCurrentRound - 1) / totalPairsInRound * 100 : 100;
            pairsProgressElement.value = pairsProgress;
            pairsTextElement.textContent = `Turnos: ${pairsInCurrentRound} / ${totalPairsInRound}`;

            const roundsProgress = (roundNumber - 1) / totalRounds * 100;
            roundsProgressElement.value = roundsProgress;
            roundsTextElement.textContent = `Rondas totales: ${roundNumber} / ${totalRounds}`;

            if (videos.length === 1) {
                pairsProgressElement.value = 100;
                roundsProgressElement.value = 100;
                pairsTextElement.textContent = `Turnos: Completado`;
                roundsTextElement.textContent = `Rondas: Completado`;
            }
        }

        function launchConfeti() {
            const canvas = document.createElement('canvas');
            canvas.id = 'confetti-canvas';
            canvas.style.position = 'fixed';
            canvas.style.top = '0';
            canvas.style.left = '0';
            canvas.style.width = '100%';
            canvas.style.height = '100%';
            canvas.style.pointerEvents = 'none';
            document.body.appendChild(canvas);

            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const confettiPieces = [];
            const colors = ['#FF4500', '#FFA500', '#FFD700', '#FFFFFF'];

            for (let i = 0; i < 100; i++) {
                confettiPieces.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    size: Math.random() * 10 + 5,
                    speed: Math.random() * 3 + 2,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    rotation: Math.random() * 360,
                    rotationSpeed: Math.random() * 5 - 2.5
                });
            }

            function animateConfetti() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                confettiPieces.forEach((piece, index) => {
                    piece.y += piece.speed;
                    piece.rotation += piece.rotationSpeed;

                    ctx.save();
                    ctx.translate(piece.x, piece.y);
                    ctx.rotate(piece.rotation * Math.PI / 180);
                    ctx.fillStyle = piece.color;
                    ctx.fillRect(-piece.size / 2, -piece.size / 2, piece.size, piece.size);
                    ctx.restore();

                    if (piece.y > canvas.height) {
                        confettiPieces[index].y = -piece.size;
                        confettiPieces[index].x = Math.random() * canvas.width;
                    }
                });
                requestAnimationFrame(animateConfetti);
            }

            animateConfetti();
            setTimeout(() => canvas.remove(), 5000);
        }

        function renderRound() {
            roundContainer.innerHTML = '';
            winnerContainer.innerHTML = '';

            if (videos.length === 1) {
                winnerContainer.innerHTML = `
                    <div class="winner-announcement">
                        <h2 class="winner-title">¡GANADOR DEL TORNEO!</h2>
                        <div class="winner-video">
                            <iframe src="${videos[0]}" allowfullscreen></iframe>
                        </div>
                    </div>
                `;
                currentRoundElement.textContent = `¡Finalizado!`;
                videosRemainingElement.textContent = `Ganador del torneo.`;
                statusContainer.textContent = `Videos eliminados: ${eliminatedVideos.length}. Videos restantes: 1.`;
                launchConfeti();
                updateBanner();
                return;
            }

            const [video1, video2] = videos.splice(0, 2);

            const container1 = document.createElement('div');
            container1.className = 'video-item';
            container1.innerHTML = `
                <iframe src="${video1}" allowfullscreen onmouseover="this.muted=false" onmouseout="this.muted=true"></iframe>
                <ul>
                    <center><li><span class="select-btn" onclick="selectVideo('${video1}', '${video2}')">Seleccionar este</span></li></center>
                </ul>
            `;

            const container2 = document.createElement('div');
            container2.className = 'video-item';
            container2.innerHTML = `
                <iframe src="${video2}" allowfullscreen onmouseover="this.muted=false" onmouseout="this.muted=true"></iframe>
                <ul>
                    <center><li><span class="select-btn" onclick="selectVideo('${video2}', '${video1}')">Seleccionar este</span></li></center>
                </ul>
            `;

            roundContainer.appendChild(container1);
            roundContainer.appendChild(container2);
        }

        function selectVideo(selected, eliminated) {
            videos.push(selected);
            eliminatedVideos.push(eliminated);
            pairsInCurrentRound++;

            if (pairsInCurrentRound > totalPairsInRound) {
                roundNumber++;
                pairsInCurrentRound = 1;
                totalPairsInRound = Math.floor(videos.length / 2);
            }

            updateBanner();
            renderRound();
        }

        updateBanner();
        renderRound();
    </script>
    <a href="../index.html" class="circle-btn"></a>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9385c5281e8cbfec',t:'MTc0NjAwMjgwMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>